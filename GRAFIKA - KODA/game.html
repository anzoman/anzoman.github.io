<html>
	<head>
		<title>VIDIMO SE NA MORU</title>
		<link rel="icon" type="image/png" sizes="32x32" href="/assets/ikone/boat/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="96x96" href="/assets/ikone/boat/favicon-96x96.png">
		<link rel="icon" type="image/png" sizes="16x16" href="/assets/ikone/boat/favicon-16x16.png">
		<link rel="manifest" href="/assets/ikone/boat/manifest.json">
		<meta name="msapplication-TileColor" content="#ffffff">
		<meta name="msapplication-TileImage" content="/assets/ikone/boat/ms-icon-144x144.png">
		<meta name="theme-color" content="#ffffff">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<link href="https://fonts.googleapis.com/css?family=Pacifico" rel="stylesheet">
		<link rel="stylesheet" href="./styles/webgl.css" type="text/css">
		<script type="text/javascript" src="./scripts/glMatrix-0.9.5.min.js"></script>
		<script src="./track.js" type="text/javascript"></script>		
		<script src="./scripts/shaders.js" type="text/javascript"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.12.1/TweenMax.min.js" type="text/javascript"></script>

		<audio autoplay id="mysong" src=mysong controls preload="metadata" style="position: absolute; top:10px; left: 1100px;">
				<p>Your browser doesn't support html5 audio.</p>
			  </audio>
			  <button id="button" type="button" onclick="switchSong()"><p>ZAMENJAJ SKLADBO</p></button>
		
			  <script>
				var $button = document.querySelector('#button');
				$button.addEventListener('click', function() {
				var duration = 0.3,
					delay = 0.08;
				TweenMax.to($button, duration, {scaleY: 2, ease: Expo.easeOut});
				TweenMax.to($button, duration, {scaleX: 2, scaleY: 1, ease: Back.easeOut, easeParams: [3], delay: delay});
				TweenMax.to($button, duration * 1.25, {scaleX: 1, scaleY: 1, ease: Back.easeOut, easeParams: [6], delay: delay * 3 });
				});

				var music = ["audio/plovi.ogg", "audio/neka.ogg", "audio/istrijanko.ogg", "audio/danza.ogg", "audio/sofia.ogg", "audio/lambada.ogg", "audio/bailando.ogg"];
				var currentSongIndex = 0;
				var currentSong = music[currentSongIndex];
				document.getElementById('mysong').src = currentSong;
		
				window.onload = function() {
					document.getElementById("mysong").play();
				}
		
				function switchSong() {
					currentSongIndex++;
					if (currentSongIndex == music.length) {
						currentSongIndex = 0;
					}
					currentSong = music[currentSongIndex];
					document.getElementById('mysong').src = currentSong;
				}
			  </script>

	    <!-- Fragment shader program -->
	    <script id="shader-fs" type="x-shader/x-fragment">
			precision mediump float;

	    	// uniform attribute for setting texture coordinates
			varying vec2 vTextureCoord;

			// uniform attribute for setting lighting
		    varying vec3 vLightWeighting;

			// uniform attribute for setting 2D sampler
			uniform sampler2D uSampler;

			void main(void) {
		    	// sample the fragment color from texture
		        vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));
		        gl_FragColor = vec4(textureColor.rgb * vLightWeighting, textureColor.a);
			}
	    </script>

    
	    <!-- Vertex shader program -->	    
	    <script id="shader-vs" type="x-shader/x-vertex">
    		// atributes for setting vertex position and texture coordinates
			attribute vec3 aVertexPosition;
			attribute vec3 aVertexNormal;
			attribute vec2 aTextureCoord;
			
		    uniform mat4 uMVMatrix;	// model-view matrix
		    uniform mat4 uPMatrix;	// projection matrix
			uniform mat3 uNMatrix;	// normal matrix

			uniform vec3 uAmbientColor;	// ambient color uniform
			
			uniform vec3 uLightingDirection;	// light direction uniform
			uniform vec3 uDirectionalColor;		// light color

			// variable for passing texture coordinates and lighting weights
			// from vertex shader to fragment shader
		    varying vec2 vTextureCoord;
		    varying vec3 vLightWeighting;

		    void main(void) {
		    	// calculate the vertex position
		        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
		        vTextureCoord = aTextureCoord;

				// transform normals
				vec3 transformedNormal = uNMatrix * aVertexNormal;

				// calculate weight for directional light
				float directionalLightWeighting = max(dot(transformedNormal, uLightingDirection), 0.0);

				// calculate lighting
				vLightWeighting = uAmbientColor + uDirectionalColor * directionalLightWeighting;
		    }
		</script>
	</head>
	<body onload="start()">
		<div id="content">
			<canvas id="glcanvas" width="1280px" height="720px">
				No <code>&lt;canvas&gt;</code> suppport in your browser.
			</canvas>
			<div id="loadingtext">NALAGAM SVET...</div>
			<br />
			<br />
			<br />
			<br />
			
			<div class="interface">
				<span id="timer">ÄŒAS: 0 s</span>
				<span id="speedometer"><span>0 <br>mph</span></span>
				<span id="lapCounter"><span id="lapCounterNumber">0</span>/3</span>
			</div>
		</div>
		<div id="mapContainer">
			<div id="minimap">
				<div id="shipIcon"></div>
				<div id="finishIcon"></div>
				<div id="boxIcon"></div>
				<img id="map" src="assets/newground.png">
			</div>
		</div>

		<script src="./scripts/track.js" type="text/javascript"></script>
		<script src="./scripts/jquery-3.2.1.min.js"></script>
		<script src="./scripts/script.js" type="text/javascript"></script>
		<script src="./scripts/ship.js" type="text/javascript"></script>
		<script src="./scripts/box.js" type="text/javascript"></script>
		<script src="./scripts/zenska.js" type="text/javascript"></script>
		<script src="./scripts/shark.js" type="text/javascript"></script>
		<script src="./scripts/rock.js" type="text/javascript"></script>
		<script src="./scripts/mansion.js" type="text/javascript"></script>
	</body>
</html>